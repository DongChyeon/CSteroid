---
date: 2025-08-14
user: MatchaKim
topic: live_data_service
---

# 실시간 데이터를 사용자에게 보여주는 서비스를 구축하려는데 어떤 방식이 있을까?

먼저 폴링Polling 이건 주기적으로 HTTP 요청을 보내서 데이터를 가져오는 방식이야.

기존에 HTTP 인프라 활용이 쉽고 주기 설정은 React query 와 같은 라이브러리로 설정하면 편해

# 폴링은 대신 매번 요청을 해야해서 핸드쉐이크 하고 데이터 받고 어우 오버헤드가 클 것 같네

응 그래서 사용하는 방식이 SSE 와 웹소켓이야

둘의 차이는 양방향이냐 일방향이냐의 차이가 있어

우리가 흔히 쓰는 GPT도 SSE 방식이거든

이 방식들은 지속적이게 연결이 유지되어있다는게 장점인데 대신 연결된 소켓을 계속 유지해야하는게 오버헤드가 큰 편이지

# 그럼 너의 상황에서는 SSE가 좋겠네

근데 문제가 있어 최신 크롬, 엣지, 파폭 등은 지원하는데 구형 IE는 지원을 안해 그리고 모바일 환경에서도 일부 안드로이드 웹뷰 환경에서는 불안정 한거지.

EventSource API라고 Javascript 에서의 브라우저 엔진이 이걸 지원 안하면 문제가 생길 수 있어서 이 부분도 고려해야하는거야

# 그렇구나 그럼 웹소켓은 어때?

1. 웹소켓은 HTTP 에서 Upgrade 요청으로 전용 프로토콜로 전환하거든 TV 앱과 같은 제한된 환경에서는 요청이 안넘어 갈 수 도 있고

2. 서버 -> 클라이언트 의 단방향 스트리밍시에는 양방향적 특성이 불필요하게 핸들링하고 상태관리를 해야하니까 부담이 커질 수 있어

3. 또 웹소켓은 연결마다 메모리 리소스를 고정적이게 쓰니까 장시간 이게 유지되려면 부담이 크지

4. 마지막으로 네트워크 정책이나 제조사 정책으로 연결유지가 불안정 할 수 가 있어

이런 문제들을 보면 폴링도 괜찮은 선택이야

# 그럼 폴링은 어떤 장점이 있어?

일단 우리가 개발하던대로 유지하면 돼서 구조가 단순해 기존 코드베이스를 유지해서 개발이 가능하다는거지

# 폴링 최적화 방식에는 어떤게 있을까?

서버캐싱, CDN 방식이 대표적이야

# 서버캐싱은 어떻게 해야하는데?

먼저 Nginx 와 같이 API 앞단에서 캐싱을 해놓고 TTL 로 데이터 만료 주기로 제공하는 방식으로 캐싱이 가능해

# Nginx 캐싱 더 자세하게 설명해줘

1. Nginx는 캐시 키에 따라서 쿼리를 받고
2. 캐시 유지시간에 따라서 시간을 지정해

특히 중요하게 봐야할 것은 캐시락이야

# 캐시락이 뭐야?

캐시락은 만약에 조건을 만족하지 못해서 캐시 미스가 났어 그럼 그 많은 트래픽이 API 서버로 쏟아지겠지? 일단은 하나의 요청만 보내놓고 답장한 다음에 쏟아지는 요청에 대해서 응답하는게 캐시락이야

# 최근에 서버에서 다른 사람 이름으로 로그인 되어 문제였는데 그것도 이런 식에서 일어난걸까?

확답하기 어렵지만 그럴 가능성이 있어 이 문제는 SSR방식의 실수에서 발생할 수 있거든

SSR시에 인증관련 로직을 서버에서 수행하는데 그 서버에서 수행하고 회원정보를 가진 채로 내려주는데

그리고 내려준걸 캐싱해버리게 된거지 이때 문제가 생기는거야

더 큰 문제는 Nextjs단에서도 캐싱이 가능하고 엔진엑스 단에서도 캐싱이 가능하고 CDN단에서도 캐싱이 가능하니까 이게 각각의 요청과 그에 따른 부분들을 확실히 점검 할 필요가 있어

> 지그재그, 회원정보 저장 인프라 오류로 개인정보 일시적 노출
> https://m.boannews.com/html/detail.html?idx=123496
