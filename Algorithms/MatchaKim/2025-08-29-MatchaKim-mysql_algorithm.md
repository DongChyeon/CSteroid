---
date: 2025-08-29
user: MatchaKim
topic: MySQL 알고리즘
---

## B 트리가 뭐야?

한 노드에 여러 데이터를 저장하는 트리구조야

## 이진탐색 트리랑 차이가 뭔데?

보통 이진탐색 트리는 한 노드에 하나의 값만 들어가잖아?

그러면 트리 높이가 커지고 많아질수록 검색할때 거칠 노드가 어떻겠어?

## 많아지겠지?

응 그래서 하나하나 읽어야하잖아 그래서 느려지는거야

## 그럼 B트리는?

하나의 노드에 여러개의 값을 넣어

그러면 트리높이가 어떻게 되겠어?

## 낮아지지

응 그래서 검색시에 거치는 단계가 줄어드는거지

## 그럼 검색은 어떻게 이루어져??

         [12 30]
        /     \
     [10]    [40 50]

위같은 상황일때 먼저 10 을 찾는다고 가정해볼게

그럼 루트에서 이진탐색을 해 그럼 12 보다 10이 작으니까 왼쪽으로 이동하겠지? 10이 있네?? 찾은거야

## 각 노드안에서 이진탐색을 한번 더 하는거네

그치 깊이를 낮게 하기 위한 B트리의 노력이야

## 그럼 B트리는 왜 쓰는거야??

디스크는 느려, 메모리보다 100,000배는 느리다는 말이지

그래서 한번에 엄청 많이 가져오는게 중요해

## 이진트리도 그럼 많이 가져오면 되잖아 ㅋㅋ

이진 탐색트리는 포인터 기반 구조거든?

그래서 각 노드가 메모리에 작은단위로 분산이 되어있어

여기 저기 퍼져있다는 말이지

지금 너가 데이터가 있는데 메모리에 올려놓으면 어떻다고 했어??

## 데이터 접근이 매우 빠르겠지

그러니까 메모리 (RAM)에다가 포인터로 빠르게 이동이 가능한거지

## 그러니까 너 말은 디스크에 올려놓은건 많이 확 가져와야하고 메모리에 올려놓은건 어차피 접근이 빠르니까 조금만 가져와도 된다는거네

그치 B트리는 이진트리랑 다르게 덩어리 단위로 묶어서 저장해

## 덩어리 단위??

응 이건 디스크의 작동에 대해서 알면 좋은데

디스크는 데이터를 작은 블록단위로 읽고 써

보통 하나의 블록이 4kb 이고 나 10바이트만 읽을래~ 이런거 안돼

그래서 B트리는 이런 디스크 블록 구조에 최적화 되있어서 한 노드를 하나의 4kb블록에 맞춰서 저장해

한번에 읽어올 수 있는 최대량을 꽉 채우는거지

## 결국 이진트리는 "바로 옆방으로 이동하세요!" 느낌이고,

B트리는 "마트 15번 통로로 가세요!"처럼 먼 곳에서 큰 덩어리를 찾는 구조인 거지.

## 그럼 디스크를 이용하는 DB에선 B트리를 확실히 많이 쓰겠네

근데 DB에선 실제로는 B+트리를 더 많이 써

B트리는 데이터를 내부 + leaf 노드 모두에 저장하잖아?

B+트리는 leaf노드에만 저장해

그러니까

B트리 : 최상단에 있는 노드에도 저장이

B+ 트리 : 모든 데이터는 리프에만 존재하고, 내부 노드는 탐색용 인덱스 역할만 해서 중간키 값을 올림

## 그 특성이 왜??

```
       [20 | 40 | 90]
      /     |     \
 [10]    [30]   [50, 60,70,80]
```

B+트리는 리프가 Linked List 로 연결되있어 그래서 범위검색에 아주 유리하지

위에 상황에서도 50부터 80까지를 Linked List 로 연결되어있으니까 그냥 순서대로 읽을 수 있는거야

## 그게 어떤 장점이 있는건데??

우리가 DB를 생각해봐

보통 이런 쿼리들이잖아?

> WHERE id BETWEEN 50 AND 80 - 범위 검색

> WHERE id >= 50 ORDER BY id - 정렬된 순서대로 읽기

이제 왜 장점이 있는지 알겠지?

## 아니 그럼 이건 좀 알고리즘이랑 멀어지긴 하는데 문자열은 어떻게 저장해?? 인덱싱을 문자열에 거는 경우들도 있잖아

문자열은 사전순으로 나열해두는거야 문자코드는 아스키 값이 있잖아??

> "A"(65) < "B"(66)

이런걸로 비교를 하는거지
